const Discord = require('discord.js'); 

const Util = require('discord.js');

const GOOGLE_API_KEY = "AIzaSyAdORXg7UZUo7sePv97JyoDqtQVi3Ll0b8"

const getYoutubeID = require('get-youtube-id');

const Canvas = require("canvas");

const jimp = require("jimp");

const convert = require("hh-mm-ss");

const dateFormat = require('dateformat');

const fetchVideoInfo = require('youtube-info');

const YouTube = require('simple-youtube-api');

const yt_api_key = "AIzaSyDeoIH0u1e72AtfpwSKKOSy3IPp2UHzqi4"; 

const youtube = new YouTube("AIzaSyAdORXg7UZUo7sePv97JyoDqtQVi3Ll0b8");

const ytdl = require('ytdl-core');

const fs = require('fs');

const gif = require("gif-search");

const moment = require('moment');

const client = new Discord.Client({disableEveryone: true});

const request = require('request');

const prefix = '#'

client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);
	client.user.setGame(`# FiloridaShop`,'https://www.twitch.tv/v5bz');
});

 
//ÙƒÙˆØ¯ Ø§Ù„ÙˆÙ„ÙƒÙ…

client.on('guildMemberAdd', member => {
     const welcomer =  member.guild.channels.find('name', 'â€¢-filoridashop');
    if(!welcomer) return;
      if(welcomer) {
         moment.locale('ar-ly');
         var m = member.user;
        let yumz = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(m.avatarURL)
        .setAuthor(m.username,m.avatarURL)
        .addField(': ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ø§Ù„Ø¯Ø³ÙƒÙˆØ±Ø¯',`${moment(member.user.createdAt).format('D/M/YYYY h:mm a')} **\n** \`${moment(member.user.createdAt).fromNow()}\``,true)            
      
         .setFooter(`${m.tag}`,"https://images-ext-2.discordapp.net/external/JpyzxW2wMRG2874gSTdNTpC_q9AHl8x8V4SMmtRtlVk/https/orcid.org/sites/default/files/files/ID_symbol_B-W_128x128.gif")
     welcomer.send({embed:yumz});          
         
    



const w = ['./img/w1.png'];

         let Image = Canvas.Image,
            canvas = new Canvas(400, 200),
            ctx = canvas.getContext('2d');
        fs.readFile(`${w[Math.floor(Math.random() * w.length)]}`, function (err, Background) {
            if (err) return console.log(err);
            let BG = Canvas.Image;
            let ground = new Image;
            ground.src = Background;
            ctx.drawImage(ground, 0, 0, 400, 200);
             
          

                let url = member.user.displayAvatarURL.endsWith(".webp") ? member.user.displayAvatarURL.slice(100) + ".png" : member.user.displayAvatarURL;
                jimp.read(url, (err, ava) => {
                    if (err) return console.log(err);
                    ava.getBuffer(jimp.MIME_PNG, (err, buf) => {
                        if (err) return console.log(err);
                        
                        ctx.font = "bold 12px Arial";
                        ctx.fontSize = '20px';
                        ctx.fillStyle = "#f1f1f1";
                        ctx.textAlign = "center";
                        ctx.fillText(`welcome to ${member.guild.name}`, 300, 130);
                        
                        ctx.font = "bold 12px Arial";
                        ctx.fontSize = '20px';
                        ctx.fillStyle = "#f1f1f1";
                        ctx.textAlign = "center";
                        ctx.fillText(member.user.username, 200, 150);
 
                let Avatar = Canvas.Image;
                              let ava = new Avatar;
                              ava.src = buf;
                              ctx.beginPath();
                              ctx.arc(77, 101, 62, 0, Math.PI*2);
                              ctx.stroke();
                                 ctx.clip();
                                 ctx.drawImage(ava, 13, 38, 128, 126);  
                          
                
                             
welcomer.sendFile(canvas.toBuffer())



      
      
                    }  )  
      
                    

})
      });                    
 }
});


 //ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆÙ


 //ÙƒÙˆØ¯ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
client.on('message', async (message) => {
  if(message.content.startsWith("#ØªÙ‚Ø¯ÙŠÙ…")) {
    await message.channel.send("**Ù…Ø§ Ø§Ø³Ù…Ùƒ ØŸ**").then(e => {
    let filter = m => m.author.id === message.author.id
    let lan = '';
    let md = '';
    let br = '';
    let qest = '';
    let questions = [
      '**Ù…Ø§Ø°Ø§ Ø±Ø§Ø­ ØªØ¨ÙŠØ¹ Ùˆ Ø§Ø²Ø¨Ø§Øª Ø§Ù†Ùƒ Ù…Ø§ Ø±Ø§Ø­ ØªÙ†ØµØ¨**',
      ]
    let chaLan = message.channel.awaitMessages(filter, { max: 1, time: 400000, errors: ['time'] })
      .then(collected => {
        lan = collected.first().content
        collected.first().delete()
        e.delete();
        message.channel.send('** ÙƒÙ… Ø¹Ù…Ø±Ùƒ ØŸ**').then(m => {
        let chaMd = message.channel.awaitMessages(filter, { max: 1, time: 400000, errors: ['time'] })
          .then(co => {
            md = co.first().content
            co.first().delete()
            m.delete();
            let question = questions[Math.floor(Math.random() * questions.length)]
            message.channel.send(question).then(ms => {
            let br = message.channel.awaitMessages(filter, { max: 1, time: 400000, errors: ['time'] })
              .then(col => {
                br = col.first().content
                col.first().delete()
                ms.delete()
                message.channel.send('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ..').then(b => {
                setTimeout(() => { 
                  b.edit(`**ØªÙ… Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆØ³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ ÙÙ€ Ø§Ù‚Ø±Ø¨ ÙˆÙ‚Øª**`)
                },2000);
                var gg = message.guild.channels.find('name', 'â€¢-admin-sumbite')
                if(!gg) return;
                if(gg) {
                  gg.send({
                      embed : new Discord.RichEmbed()
                      .setDescription(`** Ù…Ø§ Ø§Ø³Ù…Ùƒ â“ : \n ${lan}\ÙƒÙ… Ø¹Ù…Ø±Ùƒ ğŸ”— :\n ${md} \n ${question}â“ :\n ${br} \nØªÙ… Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© : <@${message.author.id}> **`)
                      .setFooter(`PowerShopâ„¢`)
                      .setTimestamp()
                    });
                  } 
                })
              })
            })
          })
        })
      })
    })
  }
})	


//Ù‚Ø¨ÙˆÙ„ - Ø±ÙØ¶
client.on('message',async message => {

let mention = message.mentions.members.first();

let Room = client.channels.get('535971403988467727');

if(message.content.startsWith(prefix + "refused")) {

if(message.guild.id !== '535950261852700674') return;

 if (!message.member.hasPermission("MANAGE_ROLES")) return message.reply("**Ù„Ù„Ø£Ø³Ù Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©**").then(msg => msg.delete(5000));


if(!mention) return message.reply("Ù…Ù†Ø´Ù† Ø´Ø®Øµ");



Room.send(`
**Â» Ø§Ù„Ø¹Ø¶Ùˆ :** ${mention}
[ âŒ ] :: Ù„Ù‚Ø¯ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¹Ø¶Ùˆ`);

}

});
  

    
client.on('message',async message => {

let mention = message.mentions.members.first();

let Room = client.channels.get('535971403988467727');

if(message.content.startsWith(prefix + "accept")) {

if(message.guild.id !== '535950261852700674') return;

 if (!message.member.hasPermission("MANAGE_ROLES")) return message.reply("**Ù„Ù„Ø£Ø³Ù Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©**").then(msg => msg.delete(5000));


if(!mention) return message.reply("Ù…Ù†Ø´Ù† Ø´Ø®Øµ");



Room.send(`
**Â» Ø§Ù„Ø¹Ø¶Ùˆ :** ${mention}
[ âœ… ] :: Ù„Ù‚Ø¯ ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø¶Ùˆ ÙˆØ§Ø¹Ø·Ø§Ø¦Ù‡ Ø±ØªØ¨Ø© Ø¨Ø§Ø¦Ø¹`);

}

});

//Ù†Ø´Ø± Ø§ÙƒÙˆØ§Ø¯


  
            
                

          

            
            

                

          
        

      

  
client.on("message", message => {

    if (message.content.startsWith("#bbc")) {
                 if (!message.member.hasPermission("ADMINISTRATOR"))  return;
  let args = message.content.split(" ").slice(1);
  var argresult = args.join(' ');
  message.guild.members.filter(m => m.presence.status !== 'all').forEach(m => {
  m.send(`${argresult}`);
  })
  message.channel.send(`\`${message.guild.members.filter( m => m.presence.status !== 'all').size}\`:mailbox:  Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† `);
  message.delete();
  };
  });
 
 //ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª
 
 client.on("message", message => {

    if (message.content.startsWith("#bc")) {
                 if (!message.member.hasPermission("ADMINISTRATOR"))  return;
  let args = message.content.split(" ").slice(1);
  var argresult = args.join(' ');
  message.guild.members.filter(m => m.presence.status !== 'all').forEach(m => {
  m.send(`${argresult}\n ${m}`);
  })
  message.channel.send(`\`${message.guild.members.filter( m => m.presence.status !== 'all').size}\`:mailbox:  Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† `);
  message.delete();
  };
  });
//ÙƒÙˆØ¯ Ù…Ù†Ø´Ù† Ù„Ùˆ Ù…Ù†Ø´Ù†Øª Ø§Ù„Ø¨ÙˆØª ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙƒ 




client.on('message', message => {
    if (message.content.startsWith("."))
    
    message.channel.send("**Welcome To FloridaShop**ğŸ‰");
    
      



});


//ÙƒÙˆØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø´Ø®Ø§Øµ
client.on('message',async message => {
  if(message.content.startsWith(prefix + "setCount")) {
  if(!message.guild.member(message.author).hasPermissions('MANAGE_CHANNELS')) return message.reply('âŒ **Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  if(!message.guild.member(client.user).hasPermissions(['MANAGE_CHANNELS','MANAGE_ROLES_OR_PERMISSIONS'])) return message.reply('âŒ **Ù„ÙŠØ³ Ù…Ø¹ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  message.channel.send('âœ…| **ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ø±ÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­**');
  message.guild.createChannel(`Members Count : [ ${message.guild.members.size} ]` , 'voice').then(c => {
    console.log(`Count Members channel setup for guild: \n ${message.guild.name}`);
    c.overwritePermissions(message.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
    setInterval(function() {
      c.setName(`Members Count : [ ${message.guild.members.size} ]`)
    },1000);
  });
  }
});




//ÙƒÙˆØ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±
 
 client.on('message', message => {
var prefix = "." // Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³
if(message.content.startsWith(prefix +"server")){ // Ø§Ù„Ø§Ù…Ø±
  if(!message.guild.member(message.author).hasPermission("ADMINISTRATOR")) return message.reply(`**Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù„Ù„Ø§Ø¯Ø§Ø±Ø© ÙÙ‚Ø·** :negative_squared_cross_mark: `)
if(!message.channel.guild) return message.reply(' ');
const millis = new Date().getTime() - message.guild.createdAt.getTime();
const now = new Date();
dateFormat(now, 'dddd, mmmm dS, yyyy, h:MM:ss TT');
const verificationLevels = ['None', 'Low', 'Medium', 'Insane', 'Extreme'];
const days = millis / 1000 / 60 / 60 / 24;
let roles = client.guilds.get(message.guild.id).roles.map(r => r.name);
var embed  = new Discord.RichEmbed()
.setAuthor(message.guild.name, message.guild.iconURL)
.addField("**ğŸ†” Server ID:**", message.guild.id,true)
.addField("**ğŸ“… Created On**", message.guild.createdAt.toLocaleString(),true)
.addField("**ğŸ‘‘ Owned by**",`${message.guild.owner.user.username}#${message.guild.owner.user.discriminator}`)
.addField("**ğŸ‘¥ Members**",`[${message.guild.memberCount}]`,true)
.addField('**ğŸ’¬ Channels **',`**${message.guild.channels.filter(m => m.type === 'text').size}**` + ' text | Voice  '+ `**${message.guild.channels.filter(m => m.type === 'voice').size}** `,true)
.addField("**ğŸŒ Others **" , message.guild.region,true)
.addField("**ğŸ” Roles **",`**[${message.guild.roles.size}]** Role `,true)
.setColor('#000000')
message.channel.sendEmbed(embed)

}
});
 
       

 
 //ÙƒÙˆØ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±ÙˆÙ…
 
   client.on('message', message => {
    if(!message.channel.guild) return;
var prefix = "$"; // Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³
if(message.content.startsWith(prefix + 'room')) { // Ø§Ù„Ø§Ù…Ø±
    let channel = message.channel
    var embed = new Discord.RichEmbed()
      .setTitle("Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±ÙˆÙ…")
      .setColor("RANDOM")
      .setDescription(`Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø±ÙˆÙ… <#${channel.id}>\nChannel ID: ${channel.id}`)
      .addField("ØµÙ†Ø¹ ÙÙŠ", `${channel.createdAt}`)
      .addField("Ù†ÙˆØ¹ Ø§Ù„Ø±ÙˆÙ…", `${channel.type}`)
      .addField("Extra Information", `Channel is NSFW => ${channel.nsfw}\nChannel Topic=> ${channel.topic}\nChannel Parent => ${channel.parent}\nChannel Position => ${channel.position}`)
 
     message.channel.send({ embed: embed });
  }
 
    });
 
 //ÙƒÙˆØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡
 
 client.on('message', message => {
                 if (!message.channel.guild) return;
         if(message.content =='#fm')
         var kayan = new Discord.RichEmbed()
         .setThumbnail(message.author.avatarURL)
         .setFooter(message.author.username, message.author.avatarURL)
         .setTitle('ğŸŒ·| Members info')
         .addBlankField(true)
         .addField('ğŸ“—| Online',
         `${message.guild.members.filter(m=>m.presence.status == 'online').size}`)
         .addField('ğŸ“•| DND',`${message.guild.members.filter(m=>m.presence.status == 'dnd').size}`)
         .addField('ğŸ“™| Idle',`${message.guild.members.filter(m=>m.presence.status == 'idle').size}`)
         .addField('ğŸ““| Offline',`${message.guild.members.filter(m=>m.presence.status == 'offline').size}`)
         .addField('â¡| Server Members',`${message.guild.memberCount}`)
         message.channel.send(kayan);

       });
 
 

//ÙƒÙˆØ¯ Ø§ÙˆØªÙˆ Ø±ÙˆÙ„


client.on ("guildMemberAdd", member => {
  
   var role = member.guild.roles.find ("name", ".FiloridaShop");
   member.addRole (role);
  
})



//ÙƒÙˆØ¯ ØªÙ… Ø§Ù„Ø¯Ø¹ÙˆÙ‡ Ø¨ÙˆØ§Ø³Ø·Ù‡

var dat = JSON.parse(fs.readFileSync('./invite.json', 'utf8'));
function forEachObject(obj, func) {
    Object.keys(obj).forEach(function (key) { func(key, obj[key]) })
}
client.on("ready", () => {
    var guild;
    while (!guild)
        guild = client.guilds.get("535950261852700674")
    guild.fetchInvites().then((data) => {
        data.forEach((Invite, key, map) => {
            var Inv = Invite.code;
            dat[Inv] = Invite.uses;
        })
    })
})
client.on("guildMemberAdd", (member) => {
    let channel = member.guild.channels.find('name', "â€¢-floridashop");
    if (!channel) {
        console.log("!channel fails");
        return;
    }
    if (member.id == client.user.id) {
        return;
    }
    console.log('made it till here!');
    var guild;
    while (!guild)
        guild = client.guilds.get("535950261852700674")
    guild.fetchInvites().then((data) => {
        data.forEach((Invite, key, map) => {
            var Inv = Invite.code;
            if (dat[Inv])
                if (dat[Inv] < Invite.uses) {
                    console.log(3);
 channel.send(`**Welcome To FloridaShop** :gem: \n Have a Nice Time ğŸ¶ \n ${member} Invited By ${Invite.inviter}`)
 }
            dat[Inv] = Invite.uses;
        })
    })
});

 


client.on("message", (message) => {
    if (!message.content.startsWith(prefix) || message.author.bot) return;
  
    if (message.content.toLowerCase().startsWith(prefix + `help`)) {
      const embed = new Discord.RichEmbed()
      .setTitle(`:mailbox_with_mail: Help`)
      .setColor(0xCF40FA)
      .setDescription(`Ù…Ø±Ø­Ø¨Ø§ÙŒ! I'm ${client.user.username}, Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª Ø®Ø§Øµ Ù„Ù„ØªØ°Ø§ÙƒØ± Ù„Ù…Ø³Ø§Ø¹Ø±Ù‡ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ Ùˆ Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ø§ÙˆØ§Ù…Ø±:`)
      .addField(`Tickets`, `[${prefix}new]() > Ù„ÙØªØ­ ØªØ°ÙƒØ±Ù‡ Ø¬Ø¯ÙŠØ¯Ù‡ Ùˆ Ù…Ù†Ø´Ù†Ù‡ Ø§Ø¹Ø¶Ø§Ø¡ Ø¯Ø¹Ù… Ø§Ù„Ø³Ø±ÙØ± \n[${prefix}close]() > Ù„ØºÙ„Ù‚ Ø§Ù„ØªØ°ÙƒØ±Ù‡ Ø§Ù„ØªÙŠ ØªÙ… ÙØªØ­Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ø¹Ù…`)
      .addField(`Other`, `[${prefix}help]() > Ù„Ø±Ø¤ÙŠÙ‡ Ù‚Ø§Ø¦Ù…Ù‡ Ø§Ù„Ø§ÙˆØ§Ù…Ø± \n[${prefix}ping]() > Ù„Ù…Ø¹Ø±ÙÙ‡ Ø§Ù„Ø¨ÙŠÙ†Ù‚ Ø§Ù„Ø®Ø§Øµ Ù„Ù„Ø¨ÙˆØª \n[${prefix}about]() > Ù„Ù…Ø¹Ø±ÙÙ‡ ÙƒÙ„ Ø´ÙŠ Ø¹Ù† Ø§Ù„Ø¨ÙˆØª`)
      message.channel.send({ embed: embed });
    }
  
    if (message.content.toLowerCase().startsWith(prefix + `ping`)) {
      message.channel.send(`Hoold on!`).then(m => {
      m.edit(`:ping_pong: Wew, made it over the ~waves~ ! **Pong!**\nMessage edit time is ` + (m.createdTimestamp - message.createdTimestamp) + `ms, Discord API heartbeat is ` + Math.round(client.ping) + `ms.`);
      });
  }
  
  if (message.content.toLowerCase().startsWith(prefix + `new`)) {
      const reason = message.content.split(" ").slice(1).join(" ");
      if (!message.guild.roles.exists("name", "Support Team")) return message.channel.send(`Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ‡ \`Support Team\` ØµÙ†Ø¹ Ø±ØªØ¨Ø©, Ù„Ø°Ù„Ùƒ Ù„Ù† ÙŠØªÙ… ÙØªØ­ Ø§Ù„ØªØ°ÙƒØ±Ø©.\nØ§Ø°Ø§ ÙƒÙ†Øª ØªÙ…ØªÙ„Ùƒ administrator, Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø³Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¶Ø¨Ø· ÙˆØ¥Ø¹Ø·Ø§Ø¦Ù‡ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØªØ°Ø§ÙƒØ±.`);
      if (message.guild.channels.exists("name", "ticket-" + message.author.id)) return message.channel.send(`Ø§Ù†Øª Ø¨Ø§Ù„ÙØ¹Ù„ Ù„Ø¯ÙŠÙƒ ØªØ°ÙƒØ±Ù‡ Ù…ÙØªÙˆØ­Ù‡.`);
      message.guild.createChannel(`ticket-${message.author.id}`, "text").then(c => {
          let role = message.guild.roles.find("name", "Support Team");
          let role2 = message.guild.roles.find("name", "@everyone");
          c.overwritePermissions(role, {
              SEND_MESSAGES: true,
              READ_MESSAGES: true
          });
          c.overwritePermissions(role2, {
              SEND_MESSAGES: false,
              READ_MESSAGES: false
          });
          c.overwritePermissions(message.author, {
              SEND_MESSAGES: true,
              READ_MESSAGES: true
          });
          let mrx = new Discord.RichEmbed()
          .setColor('RANDOM')
          .setAuthor(message.author.tag,message.author.avatarURL)
          .setDescription(`:white_check_mark: ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ, #${c.name}.`)
          .setTimestamp()
          message.channel.sendEmbed(mrx);
          const embed = new Discord.RichEmbed()
          .setColor(0xCF40FA)
          .addField(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${message.author.username}!`, `Ù…Ù† ÙØ¶Ù„Ùƒ ÙˆØ¶Ø­ Ù„Ù…Ø§Ø°Ø§ Ù‚Ù…Øª Ø¨ÙØªØ­ Ø§Ù„ØªØ°ÙƒØ±Ù‡ Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„. Ù…Ø³Ø¤Ù„ÙŠ Ø§Ù„Ø³Ø±ÙØ± Ø³ÙˆÙ ÙŠÙƒÙˆÙ†ÙˆØ§ Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ÙÙŠ Ø§Ø³Ø±Ø¹ ÙˆÙ‚Øª Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ù‡.`)
          .setTimestamp();
          c.send({ embed: embed });
      }).catch(console.error);
  }
  if (message.content.toLowerCase().startsWith(prefix + `close`)) {
      if (!message.channel.name.startsWith(`ticket-`)) return message.channel.send(`Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù…Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø®Ø§Ø±Ø¬ Ù‚Ù†Ø§Ø© Ø§Ù„ØªØ°Ø§ÙƒØ±.`);
  
      message.channel.send(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ§ÙƒØ¯ØŸ Ø¨Ù…Ø¬Ø±Ø¯ ØªØ£ÙƒÙŠØ¯, Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¹ÙƒØ³ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„!!\nÙ„Ù„ØªØ£ÙƒÙŠØ¯ ØŒ Ø§ÙƒØªØ¨ \`-confirm\`. Ø³ÙˆÙ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ù…Ù‡Ù„Ø© Ø®Ù„Ø§Ù„ 10 Ø«ÙˆØ§Ù†Ù ÙˆÙŠØªÙ… Ø¥Ù„ØºØ§Ø¤Ù‡Ø§.`)
      .then((m) => {
        message.channel.awaitMessages(response => response.content === '-confirm', {
          max: 1,
          time: 10000,
          errors: ['time'],
        })
        .then((collected) => {
            message.channel.delete();
          })
          .catch(() => {
            m.edit('Ø§Ù†ØªÙ‡Ù‰ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ°Ø§ÙƒØ± ØŒ Ù„Ù… ÙŠØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ°ÙƒØ±Ø©.').then(m2 => {
                m2.delete();
            }, 3000);
          });
      });
  }
  
  });
  
  client.on('message', message => {
      if (message.content.startsWith(prefix + 'about')) {
      if (message.author.bot) return
      if (!message.guild) return message.reply('**:x: This Command Only In Server**')
      let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle(':mailbox_with_mail: about')
      .setDescription(`I am ${client.user.username}, and I will try my best to help everyone! If I am in a discord server, people can use me to create tickets in order`)
      .setFooter(`${client.user.username}`)
      message.author.sendEmbed(embed)
      }
  });
  

          
 
        const devs = ["467777208732352512"]
 
const adminprefix = "$";
client.on('message', message => {
    var argresult = message.content.split(` `).slice(1).join(' ');
      if (!devs.includes(message.author.id)) return;
     
  if (message.content.startsWith(adminprefix + 'ply')) {
  client.user.setGame(argresult);
      message.channel.sendMessage(`**:white_check_mark:   ${argresult}**`)
  } else
    if (message.content === (adminprefix + "Percie")) {
    message.guild.leave();        
  } else  
  if (message.content.startsWith(adminprefix + 'wt')) {
  client.user.setActivity(argresult, {type:'WATCHING'});
      message.channel.sendMessage(`**:white_check_mark:   ${argresult}**`)
  } else
  if (message.content.startsWith(adminprefix + 'ls')) {
  client.user.setActivity(argresult , {type:'LISTENING'});
      message.channel.sendMessage(`**:white_check_mark:   ${argresult}**`)
  } else    
    if (message.content.startsWith(adminprefix + 'setname')) {
  client.user.setUsername(argresult).then
      message.channel.sendMessage(`**${argresult}** : Done :>`)
  return message.reply("**You Can't Change Your Name ,Only After Two Hours :>**");
  } else
    if (message.content.startsWith(adminprefix + 'setavatar')) {
  client.user.setAvatar(argresult);
    message.channel.sendMessage(`**${argresult}** : ØªÙ… ØªØºÙŠØ± ØµÙˆØ±Ø© Ø§Ù„Ø¨ÙˆØª`);
        } else    
  if (message.content.startsWith(adminprefix + 'st')) {
    client.user.setGame(argresult, "https://www.twitch.tv/mohamedgamal");
      message.channel.sendMessage(`**:white_check_mark:   ${argresult}**`)
  }
    if(message.content === adminprefix + "restart") {
      if (!devs.includes(message.author.id)) return;
          message.channel.send(`:warning:ï¸ **Bot restarting by ${message.author.username}**`);
        console.log("\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
        console.log(`âš ï¸ Bot restarting... âš ï¸`);
        console.log("===============================================\n\n");
        client.destroy();
        child_process.fork(__dirname + "/bot.js");
        console.log(`Bot Successfully Restarted`);
    }
 
  });
 
              
 
     

//ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª 
client.login(process.env.BOT_TOKEN);
